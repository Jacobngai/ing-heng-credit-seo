---
/**
 * Dynamic Topic Tag Page - English
 * URL: /en/blog/topic/financing-guide
 */

import BaseLayout from '../../../../layouts/BaseLayout.astro';
import Breadcrumbs from '../../../../components/Breadcrumbs.astro';
import CTAButton from '../../../../components/CTAButton.astro';
import { COMPANY_INFO } from '../../../../utils/constants';
import {
  getTopicTags,
  getEquipmentTags,
  getBrandTags,
  getTagName,
  buildBrandEquipmentPostUrl,
  type Locale
} from '../../../../utils/blog-tags';

const lang: Locale = 'en';

export function getStaticPaths() {
  const topics = getTopicTags();
  return topics.map((topic) => ({
    params: { topic: topic.slug.en },
    props: { topicId: topic.id }
  }));
}

const { topic } = Astro.params;
const { topicId } = Astro.props;

const topicTag = getTopicTags().find(t => t.id === topicId);
if (!topicTag) {
  return Astro.redirect('/en/blog');
}

const topicName = getTagName(topicTag, lang);
const equipment = getEquipmentTags();
const brands = getBrandTags().slice(0, 6);

const breadcrumbItems = [
  { label: 'Home', href: '/en' },
  { label: 'Blog', href: '/en/blog' },
  { label: 'By Topic', href: '/en/blog' },
  { label: topicName, href: `/en/blog/topic/${topic}` }
];

// Topic-specific content
const topicContent: Record<string, { description: string; tips: string[]; relatedEquipment: string[] }> = {
  'financing-guide': {
    description: 'Comprehensive guides to help you understand equipment financing options, requirements, and processes in Malaysia.',
    tips: [
      'Compare rates from multiple lenders before deciding',
      'Understand the difference between hire purchase and leasing',
      'Check for hidden fees and early settlement penalties',
      'Prepare all documents before applying for faster approval'
    ],
    relatedEquipment: ['excavator', 'forklift', 'lorry', 'crane']
  },
  'buying-tips': {
    description: 'Expert advice on purchasing new and used heavy equipment. Learn what to look for and avoid costly mistakes.',
    tips: [
      'Always inspect equipment thoroughly before purchase',
      'Verify maintenance history for used equipment',
      'Compare prices from multiple dealers',
      'Consider total cost of ownership, not just purchase price'
    ],
    relatedEquipment: ['excavator', 'bulldozer', 'wheel-loader', 'backhoe']
  },
  'industry-news': {
    description: 'Stay updated with the latest news and trends in the Malaysian heavy equipment and construction industry.',
    tips: [
      'Follow government infrastructure announcements',
      'Monitor construction sector growth reports',
      'Track equipment price trends',
      'Stay informed about new technology in equipment'
    ],
    relatedEquipment: ['crane', 'bulldozer', 'road-roller', 'prime-mover']
  },
  'tax-benefits': {
    description: 'Learn about tax deductions, incentives, and benefits available for equipment financing in Malaysia.',
    tips: [
      'Claim capital allowance on equipment purchases',
      'Understand investment tax allowance eligibility',
      'Keep proper documentation for tax purposes',
      'Consult with tax professionals for optimal planning'
    ],
    relatedEquipment: ['excavator', 'lorry', 'forklift', 'crane']
  },
  'business-growth': {
    description: 'Strategies and insights for growing your business through smart equipment investments and financing.',
    tips: [
      'Invest in equipment that increases productivity',
      'Time your purchases with project requirements',
      'Use financing to preserve working capital',
      'Scale equipment fleet with business growth'
    ],
    relatedEquipment: ['excavator', 'forklift', 'lorry', 'prime-mover']
  },
  'maintenance': {
    description: 'Tips and best practices for maintaining heavy equipment to extend lifespan and reduce downtime.',
    tips: [
      'Follow manufacturer maintenance schedules',
      'Train operators on proper equipment use',
      'Keep detailed maintenance records',
      'Address issues early before they become major repairs'
    ],
    relatedEquipment: ['excavator', 'bulldozer', 'wheel-loader', 'crane']
  },
  'used-equipment': {
    description: 'Everything you need to know about buying, financing, and evaluating used heavy equipment.',
    tips: [
      'Check equipment age and hour meter readings',
      'Inspect for signs of wear and damage',
      'Verify ownership and clear title',
      'Consider certified pre-owned options'
    ],
    relatedEquipment: ['excavator', 'forklift', 'lorry', 'backhoe']
  },
  'leasing-vs-buying': {
    description: 'Compare leasing and buying options to make the best financial decision for your equipment needs.',
    tips: [
      'Consider your long-term equipment needs',
      'Compare total costs over the equipment lifecycle',
      'Evaluate tax implications of each option',
      'Factor in maintenance responsibilities'
    ],
    relatedEquipment: ['excavator', 'forklift', 'crane', 'bulldozer']
  }
};

const content = topicContent[topicId] || {
  description: 'Explore articles and resources on this topic.',
  tips: ['Stay informed', 'Make smart decisions', 'Consult experts', 'Plan ahead'],
  relatedEquipment: ['excavator', 'forklift', 'lorry']
};
---

<BaseLayout
  title={`${topicName} | Equipment Financing Resources | Ing Heng Credit`}
  description={content.description}
  lang={lang}
  keywords={[
    `${topicName.toLowerCase()} Malaysia`,
    `equipment ${topicName.toLowerCase()}`,
    `heavy equipment ${topicName.toLowerCase()}`,
    'equipment financing Malaysia'
  ]}
>
  <section class="bg-gray-50 border-b border-gray-200">
    <div class="container-custom">
      <Breadcrumbs items={breadcrumbItems} />
    </div>
  </section>

  <section class="section bg-navy-900">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto text-center">
        <span class="badge-brutalist mb-6 inline-block">Topic</span>

        <h1 class="text-4xl md:text-5xl lg:text-6xl font-black text-white mb-6" style="font-family: 'Bebas Neue', sans-serif; text-transform: uppercase;">
          <span class="text-yellow-400">{topicName}</span>
        </h1>

        <p class="text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
          {content.description}
        </p>
      </div>
    </div>
  </section>

  <section class="section bg-white">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto mb-12">
        <h2 class="text-3xl font-black text-navy-900 mb-6" style="font-family: 'Bebas Neue', sans-serif; text-transform: uppercase;">
          Key Tips: {topicName}
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          {content.tips.map((tip, index) => (
            <div class="bg-gray-50 border-4 border-navy-900 p-4" style="box-shadow: 4px 4px 0 #1E3A8A;">
              <div class="flex items-start gap-3">
                <div class="w-8 h-8 bg-yellow-400 border-2 border-navy-900 flex items-center justify-center font-black text-navy-900 flex-shrink-0">
                  {index + 1}
                </div>
                <p class="text-gray-700 font-medium">{tip}</p>
              </div>
            </div>
          ))}
        </div>
      </div>

      <h2 class="text-3xl font-black text-navy-900 mb-8 text-center" style="font-family: 'Bebas Neue', sans-serif; text-transform: uppercase;">
        Related Equipment Financing
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {equipment.filter(e => content.relatedEquipment.includes(e.id)).map((equip) => (
          <a href={buildBrandEquipmentPostUrl(lang, 'caterpillar', equip.id)} class="card-brutalist group">
            <div class="p-6">
              <div class="w-12 h-12 bg-yellow-400 border-3 border-navy-900 flex items-center justify-center mb-4" style="box-shadow: 3px 3px 0 #1E3A8A;">
                <svg class="w-6 h-6 text-navy-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
              </div>
              <h3 class="text-xl font-black text-navy-900 group-hover:text-yellow-600 transition-colors mb-2" style="font-family: 'Bebas Neue', sans-serif; text-transform: uppercase;">
                {getTagName(equip, lang)} Financing
              </h3>
              <p class="text-gray-600 text-sm mb-4">
                Finance your {getTagName(equip, lang).toLowerCase()} with competitive rates.
              </p>
              <span class="inline-flex items-center text-yellow-600 font-bold text-sm group-hover:translate-x-2 transition-transform">
                Learn More â†’
              </span>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="section bg-yellow-400 border-y-4 border-navy-900">
    <div class="container-custom">
      <h2 class="text-3xl font-black text-navy-900 mb-8 text-center" style="font-family: 'Bebas Neue', sans-serif; text-transform: uppercase;">
        Popular Brands We Finance
      </h2>

      <div class="flex flex-wrap justify-center gap-4">
        {brands.map((brand) => (
          <a
            href={`/en/blog/brand/${brand.slug.en}`}
            class="px-6 py-3 bg-white border-4 border-navy-900 font-black text-navy-900 hover:bg-navy-900 hover:text-white transition-colors"
            style="box-shadow: 4px 4px 0 #1E3A8A;"
          >
            {getTagName(brand, lang)}
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="section bg-navy-900">
    <div class="container-custom text-center">
      <h2 class="text-3xl md:text-4xl font-black text-yellow-400 mb-4" style="font-family: 'Bebas Neue', sans-serif; text-transform: uppercase;">
        Need Equipment Financing Help?
      </h2>
      <p class="text-xl text-white mb-8 max-w-2xl mx-auto">
        Our team has 40+ years of experience helping businesses finance equipment. Get a free consultation today.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <CTAButton
          text="Get Free Quote"
          link={COMPANY_INFO.whatsapp.link}
          variant="accent"
          size="large"
          icon="whatsapp"
        />
        <CTAButton
          text="View All Topics"
          link="/en/blog"
          variant="outline-white"
          size="large"
        />
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');
  .container-custom { @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8; }
  .section { @apply py-16 md:py-20; }
  .bg-navy-900 { background-color: #0F172A; }
  .text-navy-900 { color: #0F172A; }
  .border-navy-900 { border-color: #0F172A; }
  .badge-brutalist { @apply inline-block px-3 py-1 font-black uppercase bg-yellow-400 text-navy-900 border-2 border-navy-900; box-shadow: 2px 2px 0 #1E3A8A; }
  .card-brutalist { @apply bg-white overflow-hidden border-4 border-navy-900; box-shadow: 6px 6px 0 #1E3A8A; transition: all 0.3s ease; }
  .card-brutalist:hover { box-shadow: 3px 3px 0 #1E3A8A; transform: translate(3px, 3px); }
</style>
