---
/**
 * Dynamic Location Tag Page - Chinese Version
 * URL: /zh/blog/location/é›ªå…°èª, /zh/blog/location/æŸ”ä½›, etc.
 */

import BaseLayout from '../../../../layouts/BaseLayout.astro';
import Breadcrumbs from '../../../../components/Breadcrumbs.astro';
import CTAButton from '../../../../components/CTAButton.astro';
import { COMPANY_INFO } from '../../../../utils/constants';
import {
  getLocationTags,
  getEquipmentTags,
  getTagName,
  buildBlogPostUrl,
  type Locale
} from '../../../../utils/blog-tags';

const lang: Locale = 'zh';

export function getStaticPaths() {
  const locations = getLocationTags();
  return locations.map((loc) => ({
    params: { location: loc.slug.zh },
    props: { locationId: loc.id }
  }));
}

const { location } = Astro.params;
const { locationId } = Astro.props;

const locationTag = getLocationTags().find(loc => loc.id === locationId);
if (!locationTag) {
  return Astro.redirect('/zh/blog');
}

const locationName = getTagName(locationTag, lang);
const equipmentTags = getEquipmentTags();

const locationData: Record<string, { description: string; highlights: string[]; industries: string[] }> = {
  'selangor': {
    description: 'é›ªå…°èªæ˜¯é©¬æ¥è¥¿äºšå·¥ä¸šåŒ–ç¨‹åº¦æœ€é«˜çš„å·å±ï¼Œå»ºç­‘å’Œåˆ¶é€ ä¸šæ´»åŠ¨æœ€ä¸ºé›†ä¸­ã€‚',
    highlights: ['èé˜¿å—å·¥ä¸šåŒº', 'å…«æ‰“çµå†ä¹Ÿå•†ä¸šä¸­å¿ƒ', 'KLIAç‰©æµèµ°å»Š'],
    industries: ['å»ºç­‘', 'åˆ¶é€ ', 'ç‰©æµ', 'ä»“å‚¨']
  },
  'kuala-lumpur': {
    description: 'å‰éš†å¡ä½œä¸ºé¦–éƒ½ï¼Œæ˜¯é©¬æ¥è¥¿äºšç»æµå’Œå•†ä¸šæ´»åŠ¨çš„ä¸­å¿ƒã€‚',
    highlights: ['KLCCå¼€å‘åŒº', 'æ­¦å‰å…ç™»å•†ä¸šåŒº', 'TRXé‡‘èåŒº'],
    industries: ['å•†ä¸šå»ºç­‘', 'æˆ¿åœ°äº§å¼€å‘', 'åŸºç¡€è®¾æ–½']
  },
  'johor': {
    description: 'æŸ”ä½›æ˜¯é©¬æ¥è¥¿äºšå—éƒ¨é—¨æˆ·ï¼Œæ‹¥æœ‰åŒ…æ‹¬æ£®æ—åŸå¸‚å’Œä¾æ–¯å¹²è¾¾åœ¨å†…çš„å¤§å‹å‘å±•é¡¹ç›®ã€‚',
    highlights: ['ä¾æ–¯å¹²è¾¾é©¬æ¥è¥¿äºš', 'æ£®æ—åŸå¸‚', 'ä¸¹æˆå¸•æ‹‰å¸•æ–¯æ¸¯'],
    industries: ['æ¸¯å£è¿è¥', 'åˆ¶é€ ', 'æˆ¿åœ°äº§å¼€å‘']
  }
};

const locInfo = locationData[locationTag.id] || {
  description: `${locationName}ä¸ºå„è¡Œå„ä¸šæä¾›ä¼˜ç§€çš„è®¾å¤‡èèµ„æœºä¼šã€‚`,
  highlights: ['å·¥ä¸šå›­åŒº', 'å•†ä¸šåŒº', 'å¼€å‘åŒº'],
  industries: ['å»ºç­‘', 'åˆ¶é€ ', 'ç‰©æµ']
};

const breadcrumbItems = [
  { label: 'é¦–é¡µ', href: '/zh' },
  { label: 'åšå®¢', href: '/zh/blog' },
  { label: 'æŒ‰åœ°ç‚¹', href: '/zh/blog/location' },
  { label: locationName, href: `/zh/blog/location/${location}` },
];
---

<BaseLayout
  title={`${locationName}è®¾å¤‡èèµ„ | ä¸“å®¶æŒ‡å— | ç›ˆäº¨ä¿¡è´·`}
  description={`${locationName}è®¾å¤‡èèµ„å…¨é¢æŒ‡å—ã€‚äº†è§£æŒ–æ˜æœºã€å‰è½¦ã€å¡è½¦ç­‰æ›´å¤šè®¾å¤‡çš„èèµ„é€‰æ‹©ã€‚24å°æ—¶æ‰¹å‡†ã€‚`}
  lang={lang}
  keywords={[
    `${locationName}è®¾å¤‡èèµ„`,
    `${locationName}æŒ–æ˜æœºèèµ„`,
    `${locationName}å‰è½¦è´·æ¬¾`,
    `${locationName}å¡è½¦èèµ„`,
    `${locationName}é‡å‹è®¾å¤‡è´·æ¬¾`
  ]}
>
  <section class="bg-gray-50 border-b border-gray-200">
    <div class="container-custom">
      <Breadcrumbs items={breadcrumbItems} />
    </div>
  </section>

  <section class="section bg-navy-900">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto text-center">
        <div class="inline-flex items-center gap-2 bg-yellow-400 text-navy-900 px-4 py-2 mb-6 border-3 border-navy-900 font-black uppercase text-sm" style="box-shadow: 4px 4px 0 rgba(0,0,0,0.3);">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
          </svg>
          <span>åœ°ç‚¹æŒ‡å—</span>
        </div>

        <h1 class="text-4xl md:text-5xl lg:text-6xl font-black text-white mb-6" style="font-family: 'Bebas Neue', sans-serif;">
          <span class="text-yellow-400">{locationName}</span>è®¾å¤‡èèµ„
        </h1>

        <p class="text-xl text-gray-300 mb-8 leading-relaxed">
          {locInfo.description}
        </p>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          {locInfo.industries.map((industry) => (
            <div class="bg-white/10 backdrop-blur px-4 py-3 border-2 border-yellow-400/30">
              <span class="text-yellow-400 font-bold text-sm">{industry}</span>
            </div>
          ))}
        </div>

        <div class="flex flex-wrap justify-center gap-6 text-sm text-yellow-400 font-bold">
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span>{equipmentTags.length}ç§è®¾å¤‡ç±»å‹</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span>æœ¬åœ°æœåŠ¡</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span>24å°æ—¶æ‰¹å‡†</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section bg-white">
    <div class="container-custom">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-black text-navy-900 mb-4" style="font-family: 'Bebas Neue', sans-serif;">
          {locationName}è®¾å¤‡èèµ„æŒ‡å—
        </h2>
        <p class="text-gray-700 text-lg max-w-2xl mx-auto">
          é€‰æ‹©è®¾å¤‡ç±»å‹ï¼Œäº†è§£{locationName}ç‰¹å®šçš„èèµ„é€‰æ‹©ã€è¦æ±‚å’Œå»ºè®®ã€‚
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {equipmentTags.map((equipment) => (
          <a
            href={buildBlogPostUrl(lang, locationTag.id, equipment.id)}
            class="card-brutalist group hover:scale-[1.02] transition-transform duration-300"
          >
            <div class="aspect-video bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center border-b-4 border-navy-900">
              <span class="text-6xl opacity-50 group-hover:opacity-70 transition-opacity">
                {equipment.icon === 'excavator' ? 'ğŸšœ' :
                 equipment.icon === 'forklift' ? 'ğŸ—ï¸' :
                 equipment.icon === 'lorry' ? 'ğŸš›' :
                 equipment.icon === 'prime-mover' ? 'ğŸšš' :
                 equipment.icon === 'crane' ? 'ğŸ—ï¸' : 'ğŸ—ï¸'}
              </span>
            </div>
            <div class="p-6">
              <div class="flex items-center gap-2 mb-3">
                <span class="badge-brutalist text-xs">{locationName}</span>
                <span class="badge-brutalist bg-white text-xs">{getTagName(equipment, lang)}</span>
              </div>
              <h3 class="text-xl font-black text-navy-900 mb-2 group-hover:text-yellow-600 transition-colors" style="font-family: 'Bebas Neue', sans-serif;">
                {locationName}{getTagName(equipment, lang)}èèµ„
              </h3>
              <p class="text-gray-600 text-sm mb-4">
                {locationName}{getTagName(equipment, lang)}èèµ„å®Œæ•´æŒ‡å—ã€‚äº†è§£è¦æ±‚ã€åˆ©ç‡å’Œæ‰¹å‡†æµç¨‹ã€‚
              </p>
              <span class="inline-flex items-center text-yellow-600 font-black text-sm group-hover:translate-x-2 transition-transform">
                é˜…è¯»æŒ‡å—
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </span>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="section bg-gray-50 border-y-4 border-navy-900">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto">
        <div class="bg-navy-900 p-8 border-4 border-yellow-400 text-center" style="box-shadow: 8px 8px 0 rgba(250, 204, 21, 0.4);">
          <h3 class="text-2xl font-black text-yellow-400 mb-4" style="font-family: 'Bebas Neue', sans-serif;">
            å‡†å¤‡åœ¨{locationName}èèµ„æ‚¨çš„è®¾å¤‡ï¼Ÿ
          </h3>
          <p class="text-white mb-6">
            ç«‹å³è·å–å…è´¹æŠ¥ä»·ã€‚æˆ‘ä»¬çš„å›¢é˜ŸæœåŠ¡{locationName}ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ‰¾åˆ°æœ€ä½³èèµ„æ–¹æ¡ˆã€‚
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <CTAButton
              text="è·å–å…è´¹æŠ¥ä»·"
              link={COMPANY_INFO.whatsapp.link}
              variant="accent"
              size="large"
              icon="whatsapp"
            />
            <CTAButton
              text="ç«‹å³è‡´ç”µ"
              link={`tel:${COMPANY_INFO.phone.international}`}
              variant="outline-white"
              size="large"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section bg-white">
    <div class="container-custom">
      <h2 class="text-2xl font-black text-navy-900 mb-8 text-center" style="font-family: 'Bebas Neue', sans-serif;">
        æµè§ˆå…¶ä»–åœ°ç‚¹
      </h2>
      <div class="flex flex-wrap justify-center gap-3">
        {getLocationTags().filter(loc => loc.id !== locationTag.id).map((loc) => (
          <a
            href={`/zh/blog/location/${loc.slug.zh}`}
            class="px-4 py-2 bg-white border-3 border-navy-900 font-bold text-navy-900 hover:bg-yellow-400 transition-colors"
            style="box-shadow: 3px 3px 0 #1E3A8A;"
          >
            {getTagName(loc, lang)}
          </a>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');

  .container-custom { @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8; }
  .section { @apply py-16 md:py-20; }
  .bg-navy-900 { background-color: #0F172A; }
  .text-navy-900 { color: #0F172A; }
  .border-navy-900 { border-color: #0F172A; }
  .badge-brutalist {
    @apply inline-block px-3 py-1 font-black bg-yellow-400 text-navy-900 border-2 border-navy-900;
    box-shadow: 2px 2px 0 #1E3A8A;
  }
  .card-brutalist {
    @apply bg-white overflow-hidden border-4 border-navy-900;
    box-shadow: 8px 8px 0 #1E3A8A;
    transition: all 0.3s ease;
  }
  .card-brutalist:hover { box-shadow: 4px 4px 0 #1E3A8A; }
</style>
